<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Openwrt学习笔记31_45 | 我的世界</title><meta name="keywords" content="openwrt,linux"><meta name="author" content="NPCS_AS"><meta name="copyright" content="NPCS_AS"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="cungudafa:在学习中">
<meta property="og:type" content="article">
<meta property="og:title" content="Openwrt学习笔记31_45">
<meta property="og:url" content="https://alongsoft2018.github.io.git/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/index.html">
<meta property="og:site_name" content="我的世界">
<meta property="og:description" content="cungudafa:在学习中">
<meta property="og:locale">
<meta property="og:image" content="https://openwrt.org/_media/logo.png">
<meta property="article:published_time" content="2021-08-17T17:41:22.000Z">
<meta property="article:modified_time" content="2021-08-17T17:42:28.531Z">
<meta property="article:author" content="NPCS_AS">
<meta property="article:tag" content="openwrt">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://openwrt.org/_media/logo.png"><link rel="shortcut icon" href="/img/npcs.jpeg"><link rel="canonical" href="https://alongsoft2018.github.io.git/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Openwrt学习笔记31_45',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-18 01:42:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus/lib/tag_plugins.min.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="我的世界" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar_max.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">12</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">11</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 收藏</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 電影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://openwrt.org/_media/logo.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">我的世界</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 收藏</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 電影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Openwrt学习笔记31_45</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-08-17T17:41:22.000Z" title="Created 2021-08-18 01:41:22">2021-08-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-08-17T17:42:28.531Z" title="Updated 2021-08-18 01:42:28">2021-08-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Openwrt学习笔记31_45"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[toc]</p>
<h1 id="三十一、EPROM烧录备份"><a href="#三十一、EPROM烧录备份" class="headerlink" title="三十一、EPROM烧录备份"></a>三十一、EPROM烧录备份</h1><p><img src="https://img-blog.csdnimg.cn/20210719002014130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>设置虚拟机网卡2桥接无线网卡<br><img src="https://img-blog.csdnimg.cn/20210719002153702.png" alt="image"></li>
<li>本机网卡连接到Widora-007A<br><img src="https://img-blog.csdnimg.cn/2021071900223738.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719002346117.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
<li>192.168.8.1是widora出厂ip</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210719002434337.png" alt="image"></p>
<ul>
<li>EEPROM在factory分区，备份的对象是mtd2<br><img src="https://img-blog.csdnimg.cn/20210719002638675.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719002710697.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719002746243.png" alt="image"></li>
</ul>
<hr>
<h1 id="三十二、联网"><a href="#三十二、联网" class="headerlink" title="三十二、联网"></a>三十二、联网</h1><p><img src="https://img-blog.csdnimg.cn/20210719002906122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719003021610.png" alt="image"></p>
<ul>
<li>确保br-lan与上一级路由器网段不能相同。如果相同，则需要调整</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210719003121733.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021071900314179.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719003241780.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>此处，假设上一级路由器网段是192.168.8.x，此处调整为192.168.10.1</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210719003355607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>Widora网口默认模式是LAN，需要调整为WAN模式<br><img src="https://img-blog.csdnimg.cn/20210719003444588.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210719003625294.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>此处，WAN口默认是dhcp<br><img src="https://img-blog.csdnimg.cn/20210719003837290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719003837290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
<li>无线方式连网。<br><img src="https://img-blog.csdnimg.cn/202107190041291.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
<li>vi wireless</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210719004327101.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719004352427.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719004423405.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719004535974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="三十三、-SD卡启动盘制作"><a href="#三十三、-SD卡启动盘制作" class="headerlink" title="三十三、 SD卡启动盘制作"></a>三十三、 SD卡启动盘制作</h1><p> <img src="https://img-blog.csdnimg.cn/20210719122447162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>SD卡第一个分区：512Byte，用于存储分区表信息。即记录每个分区的大小，存储信息的描述等。<br><img src="https://img-blog.csdnimg.cn/20210719123136931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dd命令：if = input file； of = output file； count 代表分区的数量。一个分区代表512字节（Byte）</span><br><span class="line"></span><br><span class="line">烧写工具刚好从第1个扇区开始烧写，zero.bin刚好跨过第一个扇区</span><br><span class="line"></span><br><span class="line">u-boot-fs4412.bin 与 zero.bin 合并在一起，刚好组成可以刷的win-u-boot-fs4412.bin，其第一个扇区为空，第二个扇区开始为uboot</span><br><span class="line"></span><br><span class="line">2048个512Byte = 1MByte，用于刷新uboot前清除sd卡。</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210719123655328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719123718279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>烧写完uboot后，重启系统<br><img src="https://img-blog.csdnimg.cn/20210719123818601.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
</ul>
<hr>
<h1 id="三十四、系统移植简介"><a href="#三十四、系统移植简介" class="headerlink" title="三十四、系统移植简介"></a>三十四、系统移植简介</h1><p><img src="https://img-blog.csdnimg.cn/20210719225042698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225208385.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225305873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225330633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225355840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021071922542726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225522766.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021071922555658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20210719225646926.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></h2><h1 id="三十五、环境配置"><a href="#三十五、环境配置" class="headerlink" title="三十五、环境配置"></a>三十五、环境配置</h1><p><img src="https://img-blog.csdnimg.cn/20210719225837832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225902123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719225954421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230128122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230227671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230309563.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230359171.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230443251.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230531850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230615807.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230650151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719230800164.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021071923084939.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231028985.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231114850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="三十六、uboot"><a href="#三十六、uboot" class="headerlink" title="三十六、uboot"></a>三十六、uboot</h1><p><img src="https://img-blog.csdnimg.cn/20210719231319786.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231337434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231359862.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231435958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/202107192315001.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231523257.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231545780.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231602732.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231632901.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719231648325.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="三十七、tftp加载Linux内核及rootfs"><a href="#三十七、tftp加载Linux内核及rootfs" class="headerlink" title="三十七、tftp加载Linux内核及rootfs"></a>三十七、tftp加载Linux内核及rootfs</h1><p><img src="https://img-blog.csdnimg.cn/20210719232222951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021071923225033.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232345672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232600528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232627645.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/202107192327363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232755324.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232832766.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232857225.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232916855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232939231.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719232959981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233018134.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233042409.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233058345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="三十八、交叉编译工具链"><a href="#三十八、交叉编译工具链" class="headerlink" title="三十八、交叉编译工具链"></a>三十八、交叉编译工具链</h1><p><img src="https://img-blog.csdnimg.cn/20210719233436943.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233525543.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233542517.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233558948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233616509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233632685.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233710160.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233749884.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233808739.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233840794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233857468.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719233949379.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719234023934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719234055197.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210719234126839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20210719234148338.png" alt="image"></h2><h1 id="三十九、"><a href="#三十九、" class="headerlink" title="三十九、*"></a>三十九、<strong><strong>*</strong></strong></h1><hr>
<h1 id="四十、Linux内核移植"><a href="#四十、Linux内核移植" class="headerlink" title="四十、Linux内核移植"></a>四十、Linux内核移植</h1><p><img src="https://img-blog.csdnimg.cn/20210720225017569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225048613.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225132780.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225206481.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225229964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225247736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225320475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225352254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225456149.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225521830.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225558580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225658390.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225803112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225851491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210720225957490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<h2 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20210720230104822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></h2><h1 id="四十一、Linux-driver-移植"><a href="#四十一、Linux-driver-移植" class="headerlink" title="四十一、Linux driver 移植"></a>四十一、Linux driver 移植</h1><p><img src="https://img-blog.csdnimg.cn/20210721062328392.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721062405212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021072106245597.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721062534690.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721062740301.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721063126210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721063246685.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721063411112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="四十二、根文件系统移植"><a href="#四十二、根文件系统移植" class="headerlink" title="四十二、根文件系统移植"></a>四十二、根文件系统移植</h1><p><img src="https://img-blog.csdnimg.cn/20210721063702114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721063744880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721063842383.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721064014463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721064109786.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210721064209719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="四十三、无线相关的基本概念"><a href="#四十三、无线相关的基本概念" class="headerlink" title="四十三、无线相关的基本概念"></a>四十三、无线相关的基本概念</h1><p><img src="https://img-blog.csdnimg.cn/20210723144219446.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>AP: 1对多的服务<br>Client: 连接到对端，1对1的方式。 无线网卡一个状态只能工作在一个频段，无法多频率复用。如果实现一对多，就需要实现不同的时间片之间来回切换，网卡不支持。<br>包括virtual ssid，信道也需要设置在一个信道才可以，无法通过virtual ap/virtual ssid设置在不同频段。<br>如果要同时接入多个频段， 需要添置多个网卡才可实现</p>
<p>中继模式：repeater或wisp模式，实际上是ap模式与client模式合在一起</p>
<p>WDS：AP1与AP2之间两两之间可以互访，相当于bridge功能<br>Wireless Bridge：broadcom特有功能。apcli0的接口，绑定client<br>普通client无法bridge，通过wireless就可以</p>
<p>实现apci0通过br0桥接，还需要特殊软件。</p>
<p><img src="https://img-blog.csdnimg.cn/20210723144612473.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>由于观测手法限制，很难直观看出802.11b/g/n/ac等的差别，最直观的是速率<br><img src="https://img-blog.csdnimg.cn/20210723151825139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
</ul>
<p>Wifi基于调频，OFDM。</p>
<p>802.11n/ac调制方式后面改变不大，只是通过增加天线数量来提高速率</p>
<p><img src="https://img-blog.csdnimg.cn/20210723151958381.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723152035162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>MCS在协商速率的时候会用到。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sGI：short gi</span><br></pre></td></tr></table></figure>
<img src="https://img-blog.csdnimg.cn/20210723152245650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/149176914?from_voters_page=true">https://zhuanlan.zhihu.com/p/149176914?from_voters_page=true</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cxt-janson/p/9274259.html">https://www.cnblogs.com/cxt-janson/p/9274259.html</a> </p>
<p><img src="https://img-blog.csdnimg.cn/20210723152210934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>2.4G：每个channel 5MHz，需要4个channel来组成HT20</p>
<p>5G：每个channel 20MHz</p>
<p>HT40+/-是指两个HT20的组合方式，目标HT20与其之前的HT20配对，还是与其后的HT20配对</p>
<p><img src="https://img-blog.csdnimg.cn/2021072315363726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723153712923.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723153823259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>40M时，只有channel3能用，8个channel</p>
<p>20MHz：1/6/11</p>
<p>802.11推荐使用5G频段，因为5G 20M/Channel</p>
<p>22MHz：1/6/11/14</p>
<p>Country Code：定义了不同地区频率的范围<br><img src="https://img-blog.csdnimg.cn/20210723155025259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>BSSID：SSID</p>
<p>Frame Body：放data的地方<br><img src="https://img-blog.csdnimg.cn/20210723155329164.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>Station搜索周边ap的时候，就会用到beacon包，由ap周期性发出，方便station找到ap<br><img src="https://img-blog.csdnimg.cn/20210723155907390.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></li>
<li>beacon包，间隔正常为100</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210723160043914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>GI越短，性能越好。GI越长，抗干扰性能越好<br><img src="https://img-blog.csdnimg.cn/20210723160400879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><a target="_blank" rel="noopener" href="https://download.tek.com/document/37W-29447-2_LR.pdf">https://download.tek.com/document/37W-29447-2_LR.pdf</a></li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210723161019580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723161117173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>Green AP：加入系统有3根天线，打开该功能，系统就会关掉两根天线，从而降低功耗</p>
<p>AP隔离：启动该功能后，Wireliess Client之间就无法实现互访，安全考虑</p>
<p>Preamble Type：long/short，GI的另一个说法</p>
<p>DTIM：对应beacon包里面的TIM</p>
<h2 id="-3"><a href="#-3" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20210723161806863.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></h2><h1 id="四十四、交叉编译工具使用"><a href="#四十四、交叉编译工具使用" class="headerlink" title="四十四、交叉编译工具使用"></a>四十四、交叉编译工具使用</h1><p><img src="https://img-blog.csdnimg.cn/20210723165034481.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723165154787.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210723171038566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725170059904.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>ld：产生动态库即相关的链接工作</p>
<p>ar：产生静态库</p>
<p>ranlib：库相关的命令，主要用于更新库的路径。<br><img src="https://img-blog.csdnimg.cn/20210725172038188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">addr2line:是一个可以将指令的地址和可执行映像转换成文件名、函数名和源代码行数的工具</span><br><span class="line"></span><br><span class="line">Gcov工具集：调试，性能优化相关</span><br><span class="line"></span><br><span class="line">gdb：调试</span><br><span class="line"></span><br><span class="line">readelf：看elf文件信息</span><br><span class="line"></span><br><span class="line">strip：裁剪使用</span><br><span class="line"></span><br><span class="line">strings：查看程序里面的字符串</span><br><span class="line"></span><br><span class="line">gprof：查看函数调用了多少次，消耗了多长时间等。</span><br><span class="line"></span><br><span class="line">size：查看程序的代码段、数据段</span><br><span class="line"></span><br><span class="line">objdump、objcopy：obj相关的命令</span><br><span class="line"></span><br><span class="line">nm：查看符号表</span><br><span class="line"></span><br><span class="line">elfedit</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210725172318447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>staging_dir 主要存放交叉编译工具链，以及本机需要的一些工具</p>
<p>toolchain-mipsel_24kc_gcc-7.3.0_musl:交叉编译工具所在目录<br><img src="https://img-blog.csdnimg.cn/20210725172615320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>有上面ls看到的结果，主要有两大区别，有的有-musl，有的没有musl</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2021072517281732.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>通过ls -l查看，发现，二者实际上不是一个东西</p>
<p>青色的，没有musl的，实际上是用于编译内核，带库</p>
<p>绿色的，加了-musl是用于编译用户态程序，不带库</p>
<p>通常，编译内核与编译用户态程序，两套工具是独立的。</p>
<p>如何使用交叉编译工具链？<br><img src="https://img-blog.csdnimg.cn/2021072517372449.png" alt="image"></p>
<ul>
<li>通过pwd，得到当前交叉编译工具链的完整路径，然后vi ~/.bashrc，添加path环境变量</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2021072517383138.png" alt="image"></p>
<blockquote>
<p>如果输入 mipsel-openwrt-linux-   Tab按键有输出如下完整路径，说明环境变量已经配置成功。<br><img src="https://img-blog.csdnimg.cn/20210725173913938.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">_eabi/bin$ pwd</span><br><span class="line">/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin</span><br><span class="line"> </span><br><span class="line">w@w:/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin$ sudo vim ~/.bashrc</span><br><span class="line">[sudo] password for w: </span><br><span class="line"> </span><br><span class="line">在末尾添加下面两句</span><br><span class="line">PATH=/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin:$PATH</span><br><span class="line">export STAGING_DIR=/home/openwt/staging_dir</span><br><span class="line"> </span><br><span class="line">w@w:/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin$ source ~/.bashrc</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">w@w:/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin$ ls</span><br><span class="line">arm-openwrt-linux-addr2line</span><br><span class="line">arm-openwrt-linux-ar</span><br><span class="line">arm-openwrt-linux-as</span><br><span class="line">arm-openwrt-linux-c++</span><br><span class="line">arm-openwrt-linux-c++filt</span><br><span class="line">arm-openwrt-linux-cpp</span><br><span class="line">arm-openwrt-linux-elfedit</span><br><span class="line">arm-openwrt-linux-g++</span><br><span class="line">arm-openwrt-linux-gcc</span><br><span class="line">arm-openwrt-linux-gcc-8.4.0</span><br><span class="line">arm-openwrt-linux-gcc-ar</span><br><span class="line">arm-openwrt-linux-gcc-nm</span><br><span class="line">arm-openwrt-linux-gcc-ranlib</span><br><span class="line">arm-openwrt-linux-gcov</span><br><span class="line">arm-openwrt-linux-gcov-dump</span><br><span class="line">arm-openwrt-linux-gcov-tool</span><br><span class="line">arm-openwrt-linux-gdb</span><br><span class="line">arm-openwrt-linux-gprof</span><br><span class="line">arm-openwrt-linux-ld</span><br><span class="line">arm-openwrt-linux-ld.bfd</span><br><span class="line">arm-openwrt-linux-muslgnueabi-addr2line</span><br><span class="line">arm-openwrt-linux-muslgnueabi-ar</span><br><span class="line">arm-openwrt-linux-muslgnueabi-as</span><br><span class="line">arm-openwrt-linux-muslgnueabi-c++</span><br><span class="line">arm-openwrt-linux-muslgnueabi-c++filt</span><br><span class="line">arm-openwrt-linux-muslgnueabi-cpp</span><br><span class="line">arm-openwrt-linux-muslgnueabi-elfedit</span><br><span class="line">arm-openwrt-linux-muslgnueabi-g++</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcc</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcc-8.4.0</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcc-ar</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcc-nm</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcc-ranlib</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcov</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcov-dump</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gcov-tool</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gdb</span><br><span class="line">arm-openwrt-linux-muslgnueabi-gprof</span><br><span class="line">arm-openwrt-linux-muslgnueabi-ld</span><br><span class="line">arm-openwrt-linux-muslgnueabi-ld.bfd</span><br><span class="line">arm-openwrt-linux-muslgnueabi-nm</span><br><span class="line">arm-openwrt-linux-muslgnueabi-objcopy</span><br><span class="line">arm-openwrt-linux-muslgnueabi-objdump</span><br><span class="line">arm-openwrt-linux-muslgnueabi-ranlib</span><br><span class="line">arm-openwrt-linux-muslgnueabi-readelf</span><br><span class="line">arm-openwrt-linux-muslgnueabi-size</span><br><span class="line">arm-openwrt-linux-muslgnueabi-strings</span><br><span class="line">arm-openwrt-linux-muslgnueabi-strip</span><br><span class="line">arm-openwrt-linux-nm</span><br><span class="line">arm-openwrt-linux-objcopy</span><br><span class="line">arm-openwrt-linux-objdump</span><br><span class="line">arm-openwrt-linux-ranlib</span><br><span class="line">arm-openwrt-linux-readelf</span><br><span class="line">arm-openwrt-linux-size</span><br><span class="line">arm-openwrt-linux-strings</span><br><span class="line">arm-openwrt-linux-strip</span><br><span class="line">readelf</span><br><span class="line"> </span><br><span class="line">输入arm-openwrt-linux-  Tab案件双击，就会弹出后面的一系列tool</span><br><span class="line">w@w:/home/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-8.4.0_musl_eabi/bin$ arm-openwrt-linux-</span><br><span class="line">arm-openwrt-linux-addr2line</span><br><span class="line">arm-openwrt-linux-ar</span><br><span class="line">arm-openwrt-linux-as</span><br><span class="line">arm-openwrt-linux-c++</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> GCC使用：</span><br><span class="line">makefile </span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210725181025158.png" alt="image"><br>gcc：编译出来的只能在本机使用，mipsel-openwrt-linux-gcc编译出来的东西，只能在路由器上运行。</p>
<p>ldd工具，可以查看应用程序依赖于哪些库。如果程序运行失败，可以方便查看是哪些库没有调用起来，等等，方便分析。<br><img src="https://img-blog.csdnimg.cn/20210725181344449.png" alt="image"><br>gcc工具自己就可以优化，编译时，一般没有必要再加-O选项自定义优化等级，出发非常了解O0，O1,O2，O3等的区别</p>
<p>O0一般用于调试，代码转化时，代码不会被优化，方便gdp调试，没有干扰信息。gcc -O0 xxx</p>
<p>gcc -S hello.c   //可以产生汇编代码<br><img src="https://img-blog.csdnimg.cn/20210725182008583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>通过mipsel-openwrt-linux-gcc -S hello.c 产生mips环境下的汇编代码（mips的汇编，与x86不同）</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210725182630457.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc：产生中间文件、可执行文件，汇编文件</span><br><span class="line"></span><br><span class="line">.rdata: 数据段</span><br><span class="line"></span><br><span class="line">.text: 代码段</span><br><span class="line"></span><br><span class="line">li：载入立即数</span><br><span class="line"></span><br><span class="line">la：load address</span><br><span class="line"></span><br><span class="line">lw：load word</span><br></pre></td></tr></table></figure></p>
<ul>
<li>as的使用<br><img src="https://img-blog.csdnimg.cn/20210725192411845.png" alt="image"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">as:需要先产生中间文件.o，然后通过-ld工具链接生成as文件。</span><br><span class="line"></span><br><span class="line">gcc：不需要中间转换，直接生成目标文件。 很多时候需要先进行链接，再运行</span><br></pre></td></tr></table></figure>
<img src="https://img-blog.csdnimg.cn/2021072519293216.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725193032625.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/2021072519300284.png" alt="image"><br>没有经过链接的.o程序没法执行</li>
</ul>
<p>ar 、ld的用法</p>
<p>ar：用于产生静态库</p>
<p>ld命令：产生.so文件，动态库</p>
<p><img src="https://img-blog.csdnimg.cn/20210725193844767.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>调用动态库：通过LDFLAGS</p>
<p><strong>nm</strong><br><img src="https://img-blog.csdnimg.cn/20210725194223587.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>第一列是地址，第二列是类型， 第三列：函数的名称</p>
<p>用到的时候查man手册即可</p>
<p>addr2line<br><img src="https://img-blog.csdnimg.cn/20210725194844433.png" alt="image"><br>dmesg查看细节，再dmesg最后一行会显示刚才执行代码的错误信息，下面，显示ip<br><img src="https://img-blog.csdnimg.cn/20210725194934652.png" alt="image"><br>使用addr2line -e div 400514 提升，代码的第5行出错。 400514位dmesg dump出来的ip值<br><img src="https://img-blog.csdnimg.cn/20210725195105886.png" alt="image"><br>注：使用add2line调试时，gcc必须打开-g选项。<br><img src="https://img-blog.csdnimg.cn/20210725195318732.png" alt="image"><br><strong> gdb</strong><br><img src="https://img-blog.csdnimg.cn/20210725200018998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725195834607.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725200106419.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>gdb打断点：</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/202107252006398.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725200750545.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725200811854.png" alt="image"><br>strip</p>
<p> 移除无用的符号表，节约空间. 如.comment字段</p>
<p><img src="https://img-blog.csdnimg.cn/20210725201300223.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725201241248.png" alt="image"></p>
<ul>
<li>核心代码字段并不会被压缩</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210725210920498.png" alt="image"><br>readelf</p>
<p>用于查看一个程序需要加载多少动态库<br><img src="https://img-blog.csdnimg.cn/2021072520175828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p><img src="https://img-blog.csdnimg.cn/20210725201924439.png" alt="image"></p>
<p>上面代码执行，发现libexample.so没找到，只需要找到该文件，将其放在/lib/x86_64-linux-gnu/目录下面，代码就可以执行了。</p>
<p>读符号表<br><img src="https://img-blog.csdnimg.cn/20210725204837570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>elfedit</li>
</ul>
<p>用于将elf格式转为其它格式</p>
<ul>
<li>gcov</li>
</ul>
<p>代码覆盖度测试工具，代码有没有被调用，执行了多少次<br><img src="https://img-blog.csdnimg.cn/20210725202950760.png" alt="image"></p>
<ul>
<li>如果要使用gcov工具，gcc必须打开-fprofiles-arcs与-ftest-coverage两个选项。<br><img src="https://img-blog.csdnimg.cn/20210725203128576.png" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210725203228286.png" alt="image"></li>
</ul>
<p>需要先./test执行程序，然后gcov test.c 生成test.c.gcov<br><img src="https://img-blog.csdnimg.cn/20210725203052120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<ul>
<li>查看test.c.gcov文件，发现该文件显示了每一行代码的执行次数<br><strong>gprof</strong></li>
</ul>
<p>如果使用gprof工具，就需要在gcc中打开-pg选项<br><img src="https://img-blog.csdnimg.cn/20210725203644527.png" alt="image"><br>使用方式：先执行二进制代码，然后调用gprof，显示热门函数的执行次数。<br><img src="https://img-blog.csdnimg.cn/20210725203903958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>objdump</p>
<p>反汇编,做逆向 ojbdump -S x86-hello</p>
<p>实际逆向，建议用windows下面的IDA工具</p>
<p> 读取符号表</p>
<p>objdump -t x86-hello<br><img src="https://img-blog.csdnimg.cn/20210725205058716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>objcopy</p>
<p>将elf转为bin格式，移除.comment字段<br><img src="https://img-blog.csdnimg.cn/20210725205255890.png" alt="image"><br>产生资源文件</p>
<p><strong>strings</strong></p>
<p>print 二进制相关的内容</p>
<p>main之前还有init，程序的入口并不是main</p>
<p>很多makefile，在install之前，都会进行strip动作。<br><img src="https://img-blog.csdnimg.cn/20210725210958955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<hr>
<h1 id="四十五、mt76x2e闭源驱动移植-上"><a href="#四十五、mt76x2e闭源驱动移植-上" class="headerlink" title="四十五、mt76x2e闭源驱动移植(上)"></a>四十五、mt76x2e闭源驱动移植(上)</h1><p>mt76x2 代表mt7602与mt7612，一个2G，一个5G驱动。</p>
<p>mtk共提供了三套SDK，Linux SDK，openwrt SDK，ECOS SDK</p>
<p>高通提供了两套SDK, QSDK就是openwrt SDK，LSDK就是Linux SDK</p>
<p>很多时候，厂家已经提供好基于SDK的OpenWRT，自己不需要继续移植。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make meconfig</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210726152627153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210726152753558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>有三个目录：Applications，Drivers，Liraries。 这三个目录都是MTK私有的东西。</p>
<p>MTK SDK的Kernel是MTK自己维护的，与传统的OpenWRT有区别。MTK代码是没问题，很多时候出错都是Makefile等配置环境的问题。<br><img src="https://img-blog.csdnimg.cn/20210726155054521.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>选择Drivers下面的kmod-mt76x2e驱动<br><img src="https://img-blog.csdnimg.cn/20210726155152533.png" alt="image"><br>打开开关后，这些配置信息就会被保存在.config文件里面。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mt76xe：代表pcie</span><br><span class="line"></span><br><span class="line">mt76xu：代表usb</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210726161839603.png" alt="image"></p>
<ul>
<li>make menuconfig生成的配置信息，就存在config.in中。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">w@w:/home/mtk/openwrt-sdk/package/ramips/drivers/mt76x2e$ cat Makefile </span><br><span class="line"># All rights reserved.</span><br><span class="line">#</span><br><span class="line"># This is free software, licensed under the GNU General Public License v2.</span><br><span class="line"># See /LICENSE for more information.</span><br><span class="line"> </span><br><span class="line">include $(TOPDIR)/rules.mk</span><br><span class="line">include $(INCLUDE_DIR)/kernel.mk</span><br><span class="line"> </span><br><span class="line">PKG_NAME:=mt76x2e</span><br><span class="line">P4REV:=130093</span><br><span class="line">PKG_VERSION:=3.0.4.0</span><br><span class="line"> </span><br><span class="line">PKG_SOURCE:=MT76x2e_MT7620_LinuxAP_V3.0.4.0_DPA_20150617.tar.bz2</span><br><span class="line">PKG_SOURCE_URL:=http://localhost/</span><br><span class="line">PKG_BUILD_DIR:=$(KERNEL_BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)</span><br><span class="line"> </span><br><span class="line">PKG_KCONFIG:= \</span><br><span class="line">    RALINK_MT7612E RALINK_MT7620 RLT_AP_SUPPORT WDS_SUPPORT MBSS_SUPPORT ENHANCE_NEW_MBSSID_MODE \</span><br><span class="line">    APCLI_SUPPORT APCLI_CERT_SUPPORT DFS_SUPPORT LLTD_SUPPORT NINTENDO_AP COC_SUPPORT \</span><br><span class="line">    DELAYED_TCP_ACK_SUPPORT RT_FIRST_CARD_EEPROM \</span><br><span class="line">    RT_FIRST_IF_RF_OFFSET RT_SECOND_IF_RF_OFFSET \</span><br><span class="line">    RT_FIRST_CARD RT_SECOND_CARD SNIFFER_SUPPORT CFG80211_SUPPORT \</span><br><span class="line">    RT_FIRST_CARD_EEPROM FIRST_IF_EEPROM_PROM FIRST_IF_EEPROM_EFUSE FIRST_IF_EEPROM_FLASH \</span><br><span class="line">    SECOND_IF_EEPROM_PROM SECOND_IF_EEPROM_EFUSE SECOND_IF_EEPROM_FLASH \</span><br><span class="line">    WIFI_BASIC_FUNC WSC_INCLUDED WSC_V2_SUPPORT WSC_NFC_SUPPORT DOT11N_DRAFT3 DOT11_VHT_AC \</span><br><span class="line">    DOT11W_PMF_SUPPORT TXBF_SUPPORT LLTD_SUPPORT QOS_DLS_SUPPORT \</span><br><span class="line">    CARRIER_DETECTION_SUPPORT IGMP_SNOOP_SUPPORT BLOCK_NET_IF \</span><br><span class="line">    TXBF_SUPPORT RATE_ADAPTION NEW_RATE_ADAPT_SUPPORT AGS_SUPPORT \</span><br><span class="line">    IDS_SUPPORT WIFI_WORK_QUEUE WIFI_SKB_RECYCLE RTMP_FLASH_SUPPORT \</span><br><span class="line">    LED_CONTROL_SUPPORT HW_ANTENNA_DIVERSITY ATE_SUPPORT \</span><br><span class="line">    RT2860V2_AP_V24_DATA_STRUCTURE RT2860V2_AP_32B_DESC MEMORY_OPTIMIZATION \</span><br><span class="line">    RTMP_INTERNAL_TX_ALC RTMP_TEMPERATURE_CALIBRATION HOTSPOT \</span><br><span class="line">    SINGLE_SKU_V2 RLT_MAC RLT_BBP RLT_RF RTMP_MAC RTMP_BBP RTMP_RF \</span><br><span class="line">    RTMP_PCI_SUPPORT RTMP_USB_SUPPORT RTMP_RBUS_SUPPORT DISABLE_EDCCA MULTI_CORE_SUPPORT</span><br><span class="line"> </span><br><span class="line">PKG_CONFIG_DEPENDS:=$(foreach c, $(PKG_KCONFIG),$(if $(CONFIG_$c),CONFIG_$(c)))</span><br><span class="line"> </span><br><span class="line">include $(INCLUDE_DIR)/package.mk</span><br><span class="line"> </span><br><span class="line">TAR_CMD=$(HOST_TAR) -C $(1)/ $(TAR_OPTIONS)</span><br><span class="line"> </span><br><span class="line">define KernelPackage/mt76x2e</span><br><span class="line">  CATEGORY:=MTK Properties</span><br><span class="line">  TITLE:=MTK MT76x2e wifi AP driver</span><br><span class="line">  FILES:=$(PKG_BUILD_DIR)/rlt_wifi_ap/mt76x2e.ko</span><br><span class="line">  DEPENDS:=+kmod-cfg80211</span><br><span class="line">  SUBMENU:=Drivers</span><br><span class="line">  MENU:=1</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">define KernelPackage/mt76x2e/config</span><br><span class="line">    source &quot;$(SOURCE)/config.in&quot;</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">define P4/Info</span><br><span class="line">  P4URL:=//Embedded_WIFI/MP/MT76x2/MT7612e/AP/rlt_wifi/</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">define P4/Release</span><br><span class="line">  make release</span><br><span class="line">  mkdir -p build</span><br><span class="line">  cp os/linux/Makefile.rlt_wifi_ap build/Makefile</span><br><span class="line">  cp os/linux/Kconfig.rlt_wifi_ap build/Kconfig</span><br><span class="line">  mv DPA src</span><br><span class="line">  tar cjf mt76x2e.tar.bz2 build src</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">define Build/Compile</span><br><span class="line">    $(MAKE) -C &quot;$(LINUX_DIR)&quot; V=1 \</span><br><span class="line">        CROSS_COMPILE=&quot;$(TARGET_CROSS)&quot; \</span><br><span class="line">        ARCH=&quot;$(LINUX_KARCH)&quot; \</span><br><span class="line">        SUBDIRS=&quot;$(PKG_BUILD_DIR)/rlt_wifi_ap/&quot; \</span><br><span class="line">        $(foreach c, $(PKG_KCONFIG),$(if $(CONFIG_MT76X2E_$c),CONFIG_$(c)=$(CONFIG_MT76X2E_$c)))\</span><br><span class="line">        modules</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">define KernelPackage/mt76x2e/install</span><br><span class="line">    $(INSTALL_DIR) $(1)/lib/wifi/</span><br><span class="line">    echo ------------------------------------------------------------------- $(CONFIG_RT_SECOND_CARD)</span><br><span class="line">    if [ &quot;$$(CONFIG_MT76X2E_RT_FIRST_CARD)&quot; = &quot;7602&quot; ] || [ &quot;$$(CONFIG_MT76X2E_RT_FIRST_CARD)&quot; = &quot;7602e&quot; ]; then \</span><br><span class="line">        $(INSTALL_DIR) $(1)/etc/wireless/mt7602e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7602e.sh $(1)/lib/wifi/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7602e.dat $(1)/etc/wireless/mt7602e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7602e*.bin $(1)/etc/wireless/mt7602e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/SingleSKU.dat $(1)/etc/wireless/mt7602/SingleSKU.dat ; \</span><br><span class="line">        echo p$(P4REV) &gt; $(1)/etc/wireless/mt7602e/version; \</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;$$(CONFIG_MT76X2E_RT_SECOND_CARD)&quot; = &quot;7612&quot; ] || [ &quot;$$(CONFIG_MT76X2E_RT_SECOND_CARD)&quot; = &quot;7612e&quot; ]; then \</span><br><span class="line">        $(INSTALL_DIR) $(1)/etc/wireless/mt7612e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7612e.sh $(1)/lib/wifi/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7612e.dat $(1)/etc/wireless/mt7612e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/mt7612e*.bin $(1)/etc/wireless/mt7612e/ ; \</span><br><span class="line">        $(INSTALL_BIN) ./files/SingleSKU.dat $(1)/etc/wireless/mt7612/SingleSKU.dat ; \</span><br><span class="line">        echo p$(P4REV) &gt; $(1)/etc/wireless/mt7612e/version; \</span><br><span class="line">    fi</span><br><span class="line">endef</span><br><span class="line"> </span><br><span class="line">$(eval $(call KernelPackage,mt76x2e))</span><br></pre></td></tr></table></figure>
<p>PKG_KCONFIG: OpenWRT自定义的名字。内部变量，做其它处理<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">define KernelPackage/mt76x2e</span><br><span class="line">  CATEGORY:=MTK Properties</span><br><span class="line">  TITLE:=MTK MT76x2e wifi AP driver</span><br><span class="line">  FILES:=$(PKG_BUILD_DIR)/rlt_wifi_ap/mt76x2e.ko</span><br><span class="line">  DEPENDS:=+kmod-cfg80211</span><br><span class="line">  SUBMENU:=Drivers</span><br><span class="line">  MENU:=1</span><br><span class="line">endef</span><br></pre></td></tr></table></figure><br>上面定义了驱动的名字，目录，二级目录等。下面定义Kconfig文件是config.in</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">define KernelPackage/mt76x2e/config</span><br><span class="line">    source &quot;$(SOURCE)/config.in&quot;</span><br><span class="line">endef</span><br></pre></td></tr></table></figure>
<p>配置文件放在.config文件，并没有放在kernel的.config文件。因此配置modules的时候，<br><img src="https://img-blog.csdnimg.cn/20210726191630280.png" alt="image"></p>
<p>上面highlight出来的那一句，就是将.config文件中的配置参数转成环境变量，传递到modules里面。</p>
<p> PKG_KCONFIG:里面的参数是怎么传递的？</p>
<p>在openwrt-sdk目录下的.config文件，</p>
<p><img src="https://img-blog.csdnimg.cn/2021072619301172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br>这些MT76X2E的配置文件放在 openwrt-sdk下面的.config文件，并没有放在kernel下面的.config文件，此时，make modules时就需要手动的写一串遍历的函数，去把.config里面的文件传递到mudules里面。</p>
<p>make modules时，无法读取kernel下面的.config文件。make modules的时候只能通过环境变量的方式。</p>
<p><img src="https://img-blog.csdnimg.cn/20210726201628626.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>openwrt主目录下的.config文件里面的各种选项，经过去掉等号，去除前面的#等处理后，可以通过cat confg |awk ‘{print $1 “ “}’ 将关键信息提出出来，该信息就是 “openwrt-sdk/package/ramips/drivers/mt76x2e” 下面的Makefile中“PKG_KCONFIG:=” 后面的内容。</p>
<p><img src="https://img-blog.csdnimg.cn/20210726203145777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"><br><img src="https://img-blog.csdnimg.cn/20210726202806994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>在实际移植过程中，新建src文件夹，把源代码copy到src目录下。新建config.in 与 Makefile,</p>
<p>以包的方式比较方便。<br><img src="https://img-blog.csdnimg.cn/20210726205337611.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2YyMTU3MTIw,size_16,color_FFFFFF,t_70" alt="image"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">NPCS_AS</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://alongsoft2018.github.io.git/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/">https://alongsoft2018.github.io.git/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/openwrt/">openwrt</a><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="https://openwrt.org/_media/logo.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/npcs.jpeg" target="_blank"><img class="post-qr-code-img" src="/img/npcs.jpeg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/06/03/%E5%80%9F%E7%94%A8yolov5%E5%AE%9E%E7%8E%B0%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E8%87%AA%E5%8A%A8%E6%A0%87%E6%B3%A8/"><img class="prev-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.zhimg.com%2Fv2-48c4db45f492b0f35759caf22deb7ef2_1440w.jpg%3Fsource%3D172ae18b&amp;refer=http%3A%2F%2Fpic1.zhimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1656792331&amp;t=1b5c626f1ba1d8d7339bcb4de19ea992" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">借用yolov5实现目标检测自动标注（转）</div></div></a></div><div class="next-post pull-right"><a href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B011_20/"><img class="next-cover" src="https://openwrt.org/_media/logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Openwrt学习笔记11_20</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/08/18/Openwrt学习笔记11_20/" title="Openwrt学习笔记11_20"><img class="cover" src="https://openwrt.org/_media/logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-18</div><div class="title">Openwrt学习笔记11_20</div></div></a></div><div><a href="/2021/08/18/Openwrt学习笔记1_10/" title="Openwrt学习笔记1_10"><img class="cover" src="https://openwrt.org/_media/logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-18</div><div class="title">Openwrt学习笔记1_10</div></div></a></div><div><a href="/2021/08/18/Openwrt学习笔记21_30/" title="Openwrt学习笔记21_30"><img class="cover" src="https://openwrt.org/_media/logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-18</div><div class="title">Openwrt学习笔记21_30</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar_max.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">NPCS_AS</div><div class="author-info__description">ABC</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">12</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">11</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%B8%80%E3%80%81EPROM%E7%83%A7%E5%BD%95%E5%A4%87%E4%BB%BD"><span class="toc-number">1.</span> <span class="toc-text">三十一、EPROM烧录备份</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%BA%8C%E3%80%81%E8%81%94%E7%BD%91"><span class="toc-number">2.</span> <span class="toc-text">三十二、联网</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%B8%89%E3%80%81-SD%E5%8D%A1%E5%90%AF%E5%8A%A8%E7%9B%98%E5%88%B6%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">三十三、 SD卡启动盘制作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E5%9B%9B%E3%80%81%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D%E7%AE%80%E4%BB%8B"><span class="toc-number">4.</span> <span class="toc-text">三十四、系统移植简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%BA%94%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">三十五、环境配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E5%85%AD%E3%80%81uboot"><span class="toc-number">6.</span> <span class="toc-text">三十六、uboot</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%B8%83%E3%80%81tftp%E5%8A%A0%E8%BD%BDLinux%E5%86%85%E6%A0%B8%E5%8F%8Arootfs"><span class="toc-number">7.</span> <span class="toc-text">三十七、tftp加载Linux内核及rootfs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E5%85%AB%E3%80%81%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-number">8.</span> <span class="toc-text">三十八、交叉编译工具链</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#-1"><span class="toc-number">8.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%8D%81%E4%B9%9D%E3%80%81"><span class="toc-number">9.</span> <span class="toc-text">三十九、*</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E3%80%81Linux%E5%86%85%E6%A0%B8%E7%A7%BB%E6%A4%8D"><span class="toc-number">10.</span> <span class="toc-text">四十、Linux内核移植</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#-2"><span class="toc-number">10.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E4%B8%80%E3%80%81Linux-driver-%E7%A7%BB%E6%A4%8D"><span class="toc-number">11.</span> <span class="toc-text">四十一、Linux driver 移植</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E4%BA%8C%E3%80%81%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D"><span class="toc-number">12.</span> <span class="toc-text">四十二、根文件系统移植</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E4%B8%89%E3%80%81%E6%97%A0%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">13.</span> <span class="toc-text">四十三、无线相关的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#-3"><span class="toc-number">13.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E5%9B%9B%E3%80%81%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-number">14.</span> <span class="toc-text">四十四、交叉编译工具使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E5%8D%81%E4%BA%94%E3%80%81mt76x2e%E9%97%AD%E6%BA%90%E9%A9%B1%E5%8A%A8%E7%A7%BB%E6%A4%8D-%E4%B8%8A"><span class="toc-number">15.</span> <span class="toc-text">四十五、mt76x2e闭源驱动移植(上)</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/06/03/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/" title="python字符串处理"><img src="https://img1.baidu.com/it/u=1807166483,1107331951&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=641&amp;h=401" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python字符串处理"/></a><div class="content"><a class="title" href="/2022/06/03/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/" title="python字符串处理">python字符串处理</a><time datetime="2022-06-02T20:58:22.000Z" title="Created 2022-06-03 04:58:22">2022-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/03/%E5%80%9F%E7%94%A8yolov5%E5%AE%9E%E7%8E%B0%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E8%87%AA%E5%8A%A8%E6%A0%87%E6%B3%A8/" title="借用yolov5实现目标检测自动标注（转）"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.zhimg.com%2Fv2-48c4db45f492b0f35759caf22deb7ef2_1440w.jpg%3Fsource%3D172ae18b&amp;refer=http%3A%2F%2Fpic1.zhimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1656792331&amp;t=1b5c626f1ba1d8d7339bcb4de19ea992" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="借用yolov5实现目标检测自动标注（转）"/></a><div class="content"><a class="title" href="/2022/06/03/%E5%80%9F%E7%94%A8yolov5%E5%AE%9E%E7%8E%B0%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E8%87%AA%E5%8A%A8%E6%A0%87%E6%B3%A8/" title="借用yolov5实现目标检测自动标注（转）">借用yolov5实现目标检测自动标注（转）</a><time datetime="2022-06-02T19:53:22.000Z" title="Created 2022-06-03 03:53:22">2022-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/" title="Openwrt学习笔记31_45"><img src="https://openwrt.org/_media/logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Openwrt学习笔记31_45"/></a><div class="content"><a class="title" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B031_45/" title="Openwrt学习笔记31_45">Openwrt学习笔记31_45</a><time datetime="2021-08-17T17:41:22.000Z" title="Created 2021-08-18 01:41:22">2021-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B011_20/" title="Openwrt学习笔记11_20"><img src="https://openwrt.org/_media/logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Openwrt学习笔记11_20"/></a><div class="content"><a class="title" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B011_20/" title="Openwrt学习笔记11_20">Openwrt学习笔记11_20</a><time datetime="2021-08-17T17:36:22.000Z" title="Created 2021-08-18 01:36:22">2021-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01_10/" title="Openwrt学习笔记1_10"><img src="https://openwrt.org/_media/logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Openwrt学习笔记1_10"/></a><div class="content"><a class="title" href="/2021/08/18/Openwrt%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01_10/" title="Openwrt学习笔记1_10">Openwrt学习笔记1_10</a><time datetime="2021-08-17T17:36:22.000Z" title="Created 2021-08-18 01:36:22">2021-08-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By NPCS_AS</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>